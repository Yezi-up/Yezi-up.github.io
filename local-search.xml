<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Vagrant虚拟机管理</title>
    <link href="/2020/10/02/Vagrant%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AE%A1%E7%90%86/"/>
    <url>/2020/10/02/Vagrant%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%AE%A1%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="什么是Vagrant"><a href="#什么是Vagrant" class="headerlink" title="什么是Vagrant"></a>什么是Vagrant</h1><p><strong>Vagrant</strong>是用来帮助我们创建一个虚拟环境的（感觉有点像docker），它是建立在VMware、VirtualBox等虚拟化工具之上的一个工具，用于将我们从不断安装虚拟机系统中解放出来。它在底层还是利用了虚拟化工具提供的命令行工具，</p><p>在使用该工具之前我们如果要安装一个虚拟机，可能要如下步骤：</p><ol><li>下载镜像</li><li>在VirtualBox中安装，配置硬件信息</li><li>进行相关的配置</li></ol><p>使用Vagrant我们只需要如下步骤：</p><pre><code class="hljs shell">vagrant init centos/7vagrant up</code></pre><h1 id="通过-Vagrant-创建一个虚拟机"><a href="#通过-Vagrant-创建一个虚拟机" class="headerlink" title="通过 Vagrant 创建一个虚拟机"></a>通过 Vagrant 创建一个虚拟机</h1><h3 id="1-安装Vagrant"><a href="#1-安装Vagrant" class="headerlink" title="1. 安装Vagrant"></a>1. 安装Vagrant</h3><p>因为Vagrant需要依赖虚拟化工具，所以我们需要先安装<a href="https://www.virtualbox.org/wiki/Downloads">VirtualBox</a>,然后安装<a href="https://www.vagrantup.com/downloads.html">Vagrant</a>。安装都很简单，直接下一步就可以。</p><p>安装完成在命令行中执行<code>vagrant -v</code>测试是否安装成功。</p><h3 id="2-安装一个虚拟机"><a href="#2-安装一个虚拟机" class="headerlink" title="2. 安装一个虚拟机"></a>2. 安装一个虚拟机</h3><p>注意：执行init的目录要和up的目录为同一目录。</p><p><code>vagrant init centos/7</code> 的目的是创建<strong>Vagrantfile</strong>， 该文件是虚拟机的配置文件</p><p><code>vagrant up</code> 根据当前目录下的vagrantfile启动一个虚拟机</p><p><img src="http://img.yeziup.com/img/install.png" alt="install"></p><h3 id="3-进入虚拟机"><a href="#3-进入虚拟机" class="headerlink" title="3. 进入虚拟机"></a>3. 进入虚拟机</h3><p>通过运行<code>vagrant ssh</code>可以进入虚拟机，默认的登录用户为vagrant，其实在上图的启动日志中我们也可以看到Vagrant帮我们创建了一个用户vagrant，并且生成了ssh的秘钥。</p><p>root的密码为vagrant</p><p><img src="http://img.yeziup.com/img/ssh.png" alt="ssh"></p><p>这时候我们打开VirtualBox,也可以看到我们当前启动的虚拟机。</p><p><img src="http://img.yeziup.com/img/virtualbox.png" alt="virtualbox"></p><h3 id="4-停止虚拟机"><a href="#4-停止虚拟机" class="headerlink" title="4. 停止虚拟机"></a>4. 停止虚拟机</h3><p>可以直接在VirtualBox中停止，也可以执行命令<code>vagrant halt</code>。</p><h1 id="Vagrantfile"><a href="#Vagrantfile" class="headerlink" title="Vagrantfile"></a>Vagrantfile</h1><h3 id="1-Vagrantfile配置"><a href="#1-Vagrantfile配置" class="headerlink" title="1. Vagrantfile配置"></a>1. Vagrantfile配置</h3><pre><code class="hljs ruby"><span class="hljs-comment"># -*- mode: ruby -*-</span><span class="hljs-comment"># vi: set ft=ruby :</span><span class="hljs-comment"># All Vagrant configuration is done below. The &quot;2&quot; in Vagrant.configure</span><span class="hljs-comment"># configures the configuration version (we support older styles for</span><span class="hljs-comment"># backwards compatibility). Please don&#x27;t change it unless you know what</span><span class="hljs-comment"># you&#x27;re doing.</span>Vagrant.configure(<span class="hljs-string">&quot;2&quot;</span>) <span class="hljs-keyword">do</span> <span class="hljs-params">|config|</span>  <span class="hljs-comment"># The most common configuration options are documented and commented below.</span>  <span class="hljs-comment"># For a complete reference, please see the online documentation at</span>  <span class="hljs-comment"># https://docs.vagrantup.com.</span>  <span class="hljs-comment"># Every Vagrant development environment requires a box. You can search for</span>  <span class="hljs-comment"># boxes at https://vagrantcloud.com/search.</span>  <span class="hljs-comment"># 指定用的box</span>  config.vm.box = <span class="hljs-string">&quot;centos/7&quot;</span>  <span class="hljs-comment"># Disable automatic box update checking. If you disable this, then</span>  <span class="hljs-comment"># boxes will only be checked for updates when the user runs</span>  <span class="hljs-comment"># `vagrant box outdated`. This is not recommended.</span>  <span class="hljs-comment"># config.vm.box_check_update = false</span>  <span class="hljs-comment"># Create a forwarded port mapping which allows access to a specific port</span>  <span class="hljs-comment"># within the machine from a port on the host machine. In the example below,</span>  <span class="hljs-comment"># accessing &quot;localhost:8080&quot; will access port 80 on the guest machine.</span>  <span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> This will enable public access to the opened port</span>  <span class="hljs-comment"># 设置端口转发</span>  <span class="hljs-comment"># config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 8080</span>  <span class="hljs-comment"># Create a forwarded port mapping which allows access to a specific port</span>  <span class="hljs-comment"># within the machine from a port on the host machine and only allow access</span>  <span class="hljs-comment"># via 127.0.0.1 to disable public access</span>  <span class="hljs-comment"># config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 8080, host_ip: &quot;127.0.0.1&quot;</span>  <span class="hljs-comment"># Create a private network, which allows host-only access to the machine</span>  <span class="hljs-comment"># using a specific IP.</span>  <span class="hljs-comment"># 配置网络环境</span>  <span class="hljs-comment"># config.vm.network &quot;private_network&quot;, ip: &quot;192.168.33.10&quot;</span>  config.vm.network <span class="hljs-string">&quot;private_network&quot;</span>, <span class="hljs-symbol">ip:</span> <span class="hljs-string">&quot;192.168.56.2&quot;</span>  <span class="hljs-comment"># Create a public network, which generally matched to bridged network.</span>  <span class="hljs-comment"># Bridged networks make the machine appear as another physical device on</span>  <span class="hljs-comment"># your network.</span>  <span class="hljs-comment"># 桥接方式</span>  <span class="hljs-comment"># config.vm.network &quot;public_network&quot;</span>  <span class="hljs-comment"># Share an additional folder to the guest VM. The first argument is</span>  <span class="hljs-comment"># the path on the host to the actual folder. The second argument is</span>  <span class="hljs-comment"># the path on the guest to mount the folder. And the optional third</span>  <span class="hljs-comment"># argument is a set of non-required options.</span>  <span class="hljs-comment"># 设置共享目录 默认是用virtual box，只在启动时挂载</span>  <span class="hljs-comment"># config.vm.synced_folder &quot;../data&quot;, &quot;/vagrant_data&quot;</span>  <span class="hljs-comment"># 使用 nfs 这样可以实时同步 type:&quot;nfs&quot;</span>  <span class="hljs-comment"># config.vm.synced_folder &quot;.&quot;, &quot;/vagrant&quot;,type:&quot;nfs&quot;</span>  <span class="hljs-comment"># Provider-specific configuration so you can fine-tune various</span>  <span class="hljs-comment"># backing providers for Vagrant. These expose provider-specific options.</span>  <span class="hljs-comment"># Example for VirtualBox:</span>  <span class="hljs-comment">#</span>  <span class="hljs-comment"># config.vm.provider &quot;virtualbox&quot; do |vb|</span>  <span class="hljs-comment">#   # Display the VirtualBox GUI when booting the machine</span>  <span class="hljs-comment">#   vb.gui = true</span>  <span class="hljs-comment">#</span>  <span class="hljs-comment">#   # Customize the amount of memory on the VM:</span>  <span class="hljs-comment">#   vb.memory = &quot;1024&quot;</span>  <span class="hljs-comment"># end</span>  <span class="hljs-comment">#</span>  <span class="hljs-comment"># View the documentation for the provider you are using for more</span>  <span class="hljs-comment"># information on available options.</span>  config.vm.provider <span class="hljs-string">&quot;virtualbox&quot;</span> <span class="hljs-keyword">do</span> <span class="hljs-params">|vb|</span>    <span class="hljs-comment"># Display the VirtualBox GUI when booting the machine</span>    <span class="hljs-comment"># vb.gui = true</span>        <span class="hljs-comment"># 设置虚拟机名称 也可指定其他信息 例如下边的指定内存</span>    vb.name = <span class="hljs-string">&quot;centos7&quot;</span>    <span class="hljs-comment"># Customize the amount of memory on the VM:</span>    <span class="hljs-comment"># vb.memory = &quot;1024&quot;</span>  <span class="hljs-keyword">end</span>  <span class="hljs-comment"># Enable provisioning with a shell script. Additional provisioners such as</span>  <span class="hljs-comment"># Ansible, Chef, Docker, Puppet and Salt are also available. Please see the</span>  <span class="hljs-comment"># documentation for more information about their specific syntax and use.</span>  <span class="hljs-comment"># config.vm.provision &quot;shell&quot;, inline: &lt;&lt;-SHELL</span>  <span class="hljs-comment">#   apt-get update</span>  <span class="hljs-comment">#   apt-get install -y apache2</span>  <span class="hljs-comment"># SHELL</span><span class="hljs-keyword">end</span></code></pre><h3 id="2-重启虚拟机"><a href="#2-重启虚拟机" class="headerlink" title="2. 重启虚拟机"></a>2. 重启虚拟机</h3><p>执行 <code>vagrant reload</code>,注意要在执行<code>vagrant init</code>的目录中执行</p>]]></content>
    
    
    <categories>
      
      <category>Virtual</category>
      
    </categories>
    
    
    <tags>
      
      <tag>虚拟机</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2020/10/01/hello-world/"/>
    <url>/2020/10/01/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre><code class="hljs bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre><code class="hljs bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre><code class="hljs bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
